<!doctype html>
<html>

<head>
    <base href="/reports/">
    <script src="/dmxAppConnect/dmxAppConnect.js"></script>
    <meta charset="UTF-8">
    <title>RECU PAYE</title>

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.14.0/css/all.css" integrity="sha384-HzLeBuhoNPvSl5KYnjx0BT+WB0QEEqLprO+NBkkk5gbc67FTaL7XIGa2w1L0Xbgc" crossorigin="anonymous" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="/bootstrap/5/css/bootstrap.min.css" />

    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/dmxAppConnect/dmxBootstrap5TableGenerator/dmxBootstrap5TableGenerator.css" />

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="/dmxAppConnect/dmxBootstrap5Navigation/dmxBootstrap5Navigation.js" defer></script>
    <script src="/dmxAppConnect/dmxFormatter/dmxFormatter.js" defer></script>
    <script src="/dmxAppConnect/dmxStateManagement/dmxStateManagement.js" defer></script>
    <script src="/dmxAppConnect/dmxBootstrap5Modal/dmxBootstrap5Modal.js" defer></script>
    <link rel="stylesheet" href="/dmxAppConnect/dmxAutocomplete/dmxAutocomplete.css" />
    <script src="/dmxAppConnect/dmxAutocomplete/dmxAutocomplete.js" defer></script>
</head>

<body id="recu" is="dmx-app" dmx-on:load="run([{serverConnect:{name:'sc',outputType:'object',url:'/api/Encaissement/ReportRequeteMvt',site:'EncaissementWapApi',params:{id_contrat:`local1.data.id_contrat`,argmt_cash:`local1.data.argmt_cash`,argmt_cheque:`local1.data.argmt_cheque`,argno_doc:`local1.data.argno_doc`,argbanque:`local1.data.argbanque`,argusermaj:`local1.data.argusermaj`,argmvtpaye_tx:`local1.data.argmvtpaye_tx.replace(\'&quot;\',\'\')`}}},{runJS:{outputType:'text',function:'load'}},{runJS:{outputType:'text',function:'javascript:window.addEventListener(\'afterprint\', (event) =&gt; {  console.log(\'After print\');});'}}])" class="style3">
    <dmx-array id="arr1"></dmx-array>
    <dmx-serverconnect id="serverconnect1" url="/api/Encaissement/ReportRequeteMvt" dmx-param:id_contrat="local1.data.id_contrat" dmx-param:argmt_cash="local1.data.argmt_cash" dmx-param:argmt_cheque="local1.data.argmt_cheque" dmx-param:argno_doc="local1.data.argno_doc" dmx-param:argbanque="local1.data.argbanque" dmx-param:argusermaj="local1.data.argusermaj" dmx-param:argmvtpaye_tx="local1.data.argmvtpaye_tx.replace('&quot;', '')"></dmx-serverconnect>
    <dmx-local-manager id="local1"></dmx-local-manager>
    <dmx-datetime id="var1"></dmx-datetime>
    <dmx-value id="dateVar" dmx-bind:value="var1.datetime"></dmx-value>
    <header class="mb-1 sticky-top">

        <div class="container-fluid">
            <div class="row">
                <div class="lh-base col-12 border-1 border-dark align-self-stretch text-start">
                    <div class="row row-cols-1">
                        <div class="col-1"><img src="/assets/images/logoEDD.ico" class="w-auto" width="10" height="50"></div>
                        <div class="col-10">
                            <h5 class="text-center">Electricite de Djibouti</h5>
                        </div>
                    </div>

                </div>
                <div class="text-center border-1 rounded border-dark border offset-1 col-10">
                    <h6 class="text-center w-auto">Reçu N°&nbsp; {{serverconnect1.data.headers[0].id_recu}}</h6>
                </div>
                <div class="text-center gx-5 col-12">
                    <div class="row">
                        <div class="col-4 offset-4 border border-dark border-1 h-25">
                            <h6>N CONTRAT : {{serverconnect1.data.headers[0].id_contrat}}</h6>
                        </div>
                        <div class="col h-25">
                            <h6 class="text-start">DATE : {{var1.datetime.formatDate('dd-MMM-yyyy')}}</h6>
                        </div>
                    </div>

                </div>
            </div>
        </div>



    </header>
    <main>
        <div class="container-fluid">


            <div class="row">
                <div class="pe-0 col-8">
                    <div class="row">
                        <div class="col-12">
                            <p>&nbsp; &nbsp; &nbsp;Nom : {{serverconnect1.data.headers[0].nom}}</p>
                            <p>Adresse :&nbsp; {{serverconnect1.data.headers[0].adresse}}</p>

                        </div>
                        <div class="col">
                            <div class="row">
                                <div class="col-3">
                                    <p>&nbsp; &nbsp;B.P&nbsp; &nbsp; &nbsp;: {{serverconnect1.data.headers[0].boite_postal}}</p>
                                    <p>&nbsp;N PL&nbsp; &nbsp; &nbsp;:&nbsp; &nbsp; {{serverconnect1.data.headers[0].codepl}}&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p>
                                </div>
                                <div class="col">
                                    <p>Adresse : {{serverconnect1.data.headers[0].adr_physique}}</p>
                                    <p>N Compteur :&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p>
                                </div>
                            </div>


                        </div>


                    </div>





                </div>
                <div class="col-4 ps-0">

                    <p>&nbsp; &nbsp; &nbsp; &nbsp; Date :&nbsp;</p>
                    <p>N Contrat :&nbsp; {{serverconnect1.data.headers[0].id_contrat}}</p>
                    <p>&nbsp; &nbsp;N Client : {{serverconnect1.data.headers[0].id_client}}</p>
                    <p>Solde Compte : {{serverconnect1.data.headers[0].solde_compte}}</p>
                </div>

            </div>
            <div class="row">
                <div class="col">
                    <p>Recu le montant de :&nbsp; &nbsp; &nbsp; &nbsp;DJF&nbsp; &nbsp; par notre Caissier :&nbsp;&nbsp;</p>
                </div>
            </div>
            <div class="row">

                <div class="col-12">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>N Piece</th>
                                <th>Date</th>
                                <th>Type Mouvement</th>
                                <th>Debit</th>
                                <th>Credit</th>
                            </tr>
                        </thead>
                        <tbody is="dmx-repeat" dmx-generator="bs5table" dmx-bind:repeat="serverconnect1.data.LigneMvt" id="tableRepeat1">
                            <tr>
                                <td dmx-text="trid_1"></td>
                                <td dmx-text="trdate_1"></td>
                                <td dmx-text="libelle_type_mvt_1"></td>
                                <td dmx-text="d_1"></td>
                                <td dmx-text="c_1"></td>

                            </tr>
                        </tbody>
                    </table>

                    <div class="table-responsive">
                        <table class="table table-striped table-hover">
                            <thead>
                                <tr>
                                    <th>N Piece</th>
                                    <th>Date</th>
                                    <th>Type Mouvement</th>
                                    <th>Debit</th>
                                    <th>Credit</th>
                                </tr>
                            </thead>
                            <tbody is="dmx-repeat" dmx-generator="bs5table" dmx-bind:repeat="serverconnect1.data.LigneMvt" id="tableRepeat2">
                                <tr>
                                    <td dmx-text="trid_1"></td>
                                    <td dmx-text="trdate_1.formatDate('dd-MMM-yyyy')"></td>
                                    <td dmx-text="libelle_type_mvt_1"></td>
                                    <td dmx-text="d_1"></td>
                                    <td dmx-text="c_1"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

    </main>
    <footer class="bg-light fixed-bottom border-top border-1 border-dark">
        <div class="container">
            <div class="row">
                <div class="col">
                    <h3 class="small mb-0 p-1 text-start fw-bolder text-dark h-25" dmx-html="var1.datetime.formatDate('dd-MMM-yyyy hh:mm:ss')">2024-01-02T20:40:38</h3>
                </div>
            </div>
        </div>
    </footer>
    <script>
        /* $(window).bind("load", function() {
    window.print();
});*/
 function load() {
    try 
    {
    /*dmx.parse('serverconnect1.load()')*/
    /*dmx.parse("serverconnect1.load({})");*/
    setTimeout(() => {
         window.print();
      console.log('cest bon');
    },100)
     /*window.print();
      console.log('cest bon');*/
     }
catch (e) 
{
 if (!(e instanceof Error)) {
    e = new Error(e);
  }
  console.error(e.message);
}
 }    

    //window.addEventListener("afterprint", myFunction)
 
function myFunction() {

    
   alert("This document is now being printed");
 
   //  window.location.href = "http://localhost:3000/Encaissement/EncaissementFature";
   

}

    </script>

    <script src="/bootstrap/5/js/bootstrap.bundle.min.js"></script>
</body>

</html>