<!-- Wappler include head-page="layouts/main" fontawesome_5="cdn" bootstrap5="local" is="dmx-app" id="visu" appConnect="local" components="{dmxBootstrap5Navigation:{}}" -->
<meta name="ac:route" content="/Visualisation/visu">

<div class="col rounded-top rounded-2 ms-2 ps-3 pe-3 border-top border-dark bg-white small" style="min-height: 79vh;height: auto;">
    <p class="font-monospace text-bg-light">Détails</p>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <div class="row mt-0 pt-0">
        <div class="col mt-0 pt-0">
            <ul class="nav initialism mt-0 mb-2 nav-tabs" id="navTabs1_tabs" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active fw-bolder" id="navTabs1_1_tab" data-bs-toggle="tab" href="#" data-bs-target="#navTabs1_1" role="tab" aria-controls="navTabs1_1" aria-selected="true"><i class="fas fa-copy">&nbsp;&nbsp;</i>Releve</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link fw-bolder" id="navTabs1_2_tab" data-bs-toggle="tab" href="#" data-bs-target="#navTabs1_2" role="tab" aria-controls="navTabs1_2" aria-selected="false"><i class="fas fa-map-marker-alt">&nbsp;&nbsp;</i>DETAILS PL</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link fw-bolder" id="navTabs1_3_tab" data-bs-toggle="tab" href="#" data-bs-target="#navTabs1_3" role="tab" aria-controls="navTabs1_3" aria-selected="false"><i class="fas fa-bolt">&nbsp;&nbsp;</i>cOmpteur</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link fw-bolder" id="navTabs1_4_tab" data-bs-toggle="tab" href="#" data-bs-target="#navTabs1_4" role="tab" aria-controls="navTabs1_3" aria-selected="false"><i class="fas fa-bolt">&nbsp;&nbsp;</i>Role</a>
                </li>
            </ul>
            <div class="tab-content" id="navTabs1_content">

                <div class="tab-pane show active fade pb-3 ps-2 pe-2 bg-transparent text-white" id="navTabs1_1" role="tabpanel">
                    <div class="row mb-1">


                        <div class="rounded rounded-1 border-dark border-top mt-2 mb-0 pb-0 ps-0 pe-0 col-12">

                            <p class="text-body-emphasis fw-bolder ms-2">Reléve</p>
                        </div>




                    </div>
                    <div class="row pe-0">
                        <div class="shadow-sm border border-info rounded rounded-2 col-10 pb-2">

                            <p class="fw-bold mb-3 mark small font-monospace lh-1">Reléve Pour le contrat № : {{apiportefeuille.data.api.data.numContrat}}</p>
                            <div class="table-responsive small">
                                <table class="table table-sm text-center table-hover table-striped table-borderless">
                                    <thead>
                                        <tr class="initialism text-light">
                                            <th class="small shadow-sm bg-primary bg-opacity-75 text-white">Num releve</th>
                                            <th class="small shadow-sm bg-primary bg-opacity-75 text-white">Num facture</th>
                                            <th class="small shadow-sm bg-primary bg-opacity-75 text-white">Montant</th>
                                            <th class="small shadow-sm bg-primary bg-opacity-75 text-white">Status</th>
                                            <th class="small shadow-sm bg-primary bg-opacity-75 text-white">Index</th>
                                            <th class="small shadow-sm bg-primary bg-opacity-75 text-white">Periode</th>
                                            <th class="small shadow-sm bg-primary bg-opacity-75 text-white">Date releve</th>
                                            <th class="small shadow-sm bg-primary bg-opacity-75 text-white">Date pf</th>
                                            <th class="small shadow-sm bg-primary bg-opacity-75 text-white">Date emission</th>
                                            <th class="small shadow-sm bg-primary bg-opacity-75 text-white">Compteur</th>
                                            <th class="small shadow-sm bg-primary bg-opacity-75 text-white">Type releve</th>
                                            <th class="small shadow-sm bg-primary bg-opacity-75 text-white">Commentaire</th>
                                            <th class="small shadow-sm bg-primary bg-opacity-75 text-white">Conso</th>
                                            <th class="small shadow-sm bg-primary bg-opacity-75 text-white">Contrat</th>
                                        </tr>
                                    </thead>
                                    <tbody is="dmx-repeat" dmx-generator="bs5table" dmx-bind:repeat="ApiReleve.data.api.data" id="tableRepeat2">
                                        <tr class="small" dmx-class:table-warning="(numReleve == ReleveDetail.data.numReleve)" dmx-on:click="run([{run:{outputType:'text',action:`ReleveDetail.select(numReleve)`}},{run:{outputType:'text',action:`ReleveDetails2.load({idreleve: ReleveDetail.data.numReleve})`}}])" dmx-on:dblclick="ReleveDetails.load({idreleve: ReleveDetail.data.numReleve});releve.form2.input2.setValue(ReleveDetail.data.numReleve);releve.show()">
                                            <td dmx-text="numReleve" class="fw-bold"></td>
                                            <td dmx-text="numFacture"></td>
                                            <td dmx-text="montant.formatCurrency(' ', ' ', ' ', 0)" class="fw-bold"></td>
                                            <td dmx-text="status"></td>
                                            <td dmx-text="index_A" class="fw-bold"></td>
                                            <td dmx-text="periode"></td>
                                            <td dmx-text="dateReleve.formatDate('dd-MMM-yyyy ')" class="fw-bold"></td>
                                            <td dmx-text="datePF.formatDate('dd-MMM-yyyy ')"></td>
                                            <td dmx-text="dateEmission.formatDate('dd-MMM-yyyy ')"></td>
                                            <td dmx-text="compteur" class="fw-bold"></td>
                                            <td dmx-text="typeReleve"></td>
                                            <td dmx-text="commentaire"></td>
                                            <td dmx-text="conso"></td>
                                            <td dmx-text="contrat" class="fw-bold"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>


                            <div class="d-block text-center">
                                <div class="spinner-border spinner-border-sm text-primary" role="status" dmx-show="ApiReleve.state.executing">
                                </div>
                            </div>
                        </div>
                        <div class="small text-center align-self-start rounded-2 col-2">


                            <p class="lh-1 text-start mark font-monospace fw-bold"><i class="fas fa-file-image">&nbsp;&nbsp;</i>Photo Reléve : <b>{{ReleveDetail.data.numReleve}}</b></p>

                            <div class="d-block mb-3 bg-dark text-danger shadow" id="displayphoto" dmx-animate-enter="fadeIn">
                            </div>
                            <p class="font-monospace fw-bold" dmx-show="ReleveDetails2.state.executing" dmx-animate-enter="fadeIn">Chargement en cours ...</p>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade ps-2 pe-2" id="navTabs1_2" role="tabpanel">
                    <div class="mt-3 ps-0 pe-0 container-fluid">
                        <div class="row rounded rounded-2 border-dark border-top pb-2">
                            <p class="mark lh-1">Details Points de Livraison&nbsp;</p>

                            <div class="col-4 mt-2">
                                <ul class="list-group shadow">
                                    <li class="list-group-item bg-opacity-10">N PL : <b>{{DetailsPL.data.PL[0].codepl}}&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</b><span>ID </span><span>PL :</span><b> {{DetailsPL.data.PL[0].id_pl}}&nbsp;</b></li>
                                    <li class="list-group-item bg-opacity-10">Addresse Physique :&nbsp;&nbsp;<b>{{DetailsPL.data.PL[0].adr_physique}}</b></li>
                                    <li class="list-group-item">Support : <b>{{DetailsPL.data.PL[0].code_support}}</b></li>
                                    <li class="list-group-item">PS Permise : <b>{{DetailsPL.data.PL[0].ps_permise}}</b></li>
                                    <li class="list-group-item">N ordre tournee : <b>{{DetailsPL.data.PL[0].num_tourne}}</b></li>
                                    <li class="list-group-item">Forme energie : <b>{{DetailsPL.data.PL[0].formeng}}</b></li>
                                    <li class="list-group-item list-group-item-dark bg-opacity-10">Etat PL : <b>{{DetailsPL.data.PL[0].etatpl}}</b></li>
                                    <li class="list-group-item">Access Compteur : <b>{{DetailsPL.data.PL[0].accessc}}</b></li>
                                    <li class="list-group-item">Etat Coupure : <b>{{DetailsPL.data.PL[0].etat_coupure}}</b></li>
                                    <li class="list-group-item">Commentaire 1 : <b>{{DetailsPL.data.PL[0].coment1}}</b></li>
                                    <li class="list-group-item">Commentaire 2 : <b>{{DetailsPL.data.PL[0].coment2}}</b></li>
                                </ul>
                            </div>
                            <div class="col-4 mt-2">
                                <ul class="list-group shadow">
                                    <li class="list-group-item">Rang branchement : <b>{{DetailsPL.data.PL[0].rang_branchement}}</b></li>
                                    <li class="list-group-item">Date Construction : <b>{{DetailsPL.data.PL[0].date_construction}}</b></li>
                                    <li class="list-group-item">Cellule : <b>{{DetailsPL.data.PL[0].nom_cellule}}</b></li>
                                    <li class="list-group-item">Lieu Geographique : <b>{{DetailsPL.data.PL[0].lieu_geo}}</b></li>
                                    <li class="list-group-item">Zone Geographique : <b>{{DetailsPL.data.PL[0].num_zonegeo}}</b></li>
                                    <li class="list-group-item">Tournee de Releve : <b>{{DetailsPL.data.PL[0].num_tourne}}</b></li>
                                </ul>
                            </div>
                            <div class="col-4 mt-2">
                                <ul class="list-group shadow">
                                    <li class="list-group-item bg-opacity-10">Position TI : <b>{{DetailsPL.data.PL[0].posit_ti}}</b></li>
                                    <li class="list-group-item bg-opacity-10">Rapport TI : <b>{{DetailsPL.data.PL[0].rappo_ti}}</b></li>
                                    <li class="list-group-item bg-opacity-10">Coeff. Multi Actif : <b>{{DetailsPL.data.PL[0].coeff_mult_act}}</b></li>
                                    <li class="list-group-item bg-opacity-10">Coeff Multi Reactif : <b>{{DetailsPL.data.PL[0].coeff_mult_rea}}</b></li>
                                    <li class="list-group-item bg-opacity-10">Coeff Multi Ind Max : <b>{{DetailsPL.data.PL[0].coeff_mult_ipm}}</b></li>
                                </ul>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="tab-pane fade pb-2 ps-0 pe-0" id="navTabs1_3" role="tabpanel">
                    <div class="container-fluid mt-3">
                        <div class="row border-top rounded-2 border-dark rounded-top">
                            <p class="mark">Compteur</p>

                            <div class="col-4 mt-2">
                                <ul class="list-group shadow">
                                    <li class="list-group-item bg-primary bg-opacity-10">Num Compteur : <b>{{scCompteur.data.compteur[0].code_cpteur}}</b></li>
                                    <li class="list-group-item">Num Sequentiel : <b>{{scCompteur.data.compteur[0].num_cpteur}}</b></li>
                                    <li class="list-group-item">Annee Fab : <b>{{scCompteur.data.compteur[0].annee_fab}}</b></li>
                                    <li class="list-group-item">Installe : <b>{{scCompteur.data.compteur[0].inst_phys}}</b></li>
                                </ul>
                            </div>
                            <div class="col-4 mt-2">
                                <ul class="list-group shadow">
                                    <li class="list-group-item">Modele : <b>{{scCompteur.data.compteur[0].libelle}}</b></li>
                                    <li class="list-group-item">Etat Compteur : <b>{{scCompteur.data.compteur[0].lib_court}}</b></li>
                                    <li class="list-group-item">NB Roues :&nbsp;</li>
                                    <li class="list-group-item">Type Compteur : <b>{{scCompteur.data.compteur[0].type_cmpt}}</b></li>
                                    <li class="list-group-item">Type courant : <b>{{scCompteur.data.compteur[0].type_crnt}}</b></li>
                                    <li class="list-group-item">Voltage : <b>{{scCompteur.data.compteur[0].voltage}}</b></li>
                                    <li class="list-group-item">Rapport Compteur : <b>{{scCompteur.data.compteur[0].rapport_cmp}}</b></li>
                                    <li class="list-group-item">Commentaire : <b>{{scCompteur.data.compteur[0].commentaire}}</b></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane" id="navTabs1_4" role="tabpanel">


                    <div class="row text-center mt-2">
                        <div class="small col">
                            <div class="accordion" id="accordion1">
                                <div class="card rounded-2 shadow-sm">
                                    <div class="card-body">
                                        <h6 class="card-title text-start text-uppercase fw-bold">Role :</h6>
                                        <div id="accordion1_collapseOne" class="collapse small" is="dmx-bs5-collapse" aria-labelledby="accordion1_headingOne" data-bs-parent="#accordion1" show="true">
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col ps-0 pe-0">
                                                        <div class="table-responsive">
                                                            <table class="table table-hover table-sm table-bordered">
                                                                <thead>
                                                                    <tr class="text-white">
                                                                        <th class="bg-opacity-75 shadow-sm">Type role</th>
                                                                        <th class="bg-opacity-75 shadow-sm">Lib court</th>
                                                                        <th class="bg-opacity-75 shadow-sm">Id client</th>
                                                                        <th class="bg-opacity-75 shadow-sm">Nom</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody is="dmx-repeat" dmx-generator="bs5table" dmx-bind:repeat="scRole.data.Role" id="tableRepeat1">
                                                                    <tr class="text-danger">
                                                                        <td dmx-text="type_role"></td>
                                                                        <td dmx-text="lib_court" class="bg-danger text-white bg-opacity-75"></td>
                                                                        <td dmx-text="id_client"></td>
                                                                        <td dmx-text="nom"></td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>



                    </div>
                </div>
            </div>
        </div>
    </div>

</div>